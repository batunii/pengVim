# -----------------------------------------------------
# HYPRLAND CONFIG (CLEAN BASELINE)
# -----------------------------------------------------

monitor = ,preferred,auto,1

###################
### VARIABLES ###
###################

$mainMod     = SUPER
$terminal    = kitty
$fileManager = dolphin
$menu        = hyprlauncher

#################
### AUTOSTART ###
#################

exec-once = nm-applet &
exec-once = waybar & hyprnotify & hypridle
exec-once = emacs --daemon
exec-once = blueman-applet
#############################
### ENVIRONMENT ###
#############################

env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24

###################
### PERMISSIONS ###
###################

permission = /usr/(bin|local/bin)/grim, screencopy, allow
permission = /usr/(lib|libexec|lib64)/xdg-desktop-portal-hyprland, screencopy, allow
permission = /usr/(bin|local/bin)/hyprpm, plugin, allow


###################
### LOCK ###
###################

bind = $mainMod, L, exec, hyprlock



# Volume (PipeWire / WirePlumber)
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# Brightness (brightnessctl)
bindel = ,XF86MonBrightnessUp, exec, brightnessctl set +5%
bindel = ,XF86MonBrightnessDown, exec, brightnessctl set 5%-




###################
### GENERAL ###
###################

general {
    layout = dwindle

    gaps_in = 3
    gaps_out = 15
    border_size = 2

    # Muted peach-red active border
    col.active_border   = rgba(ea7a73ff)
    col.inactive_border = rgba(595959aa)

    resize_on_border = false
    allow_tearing = false
}

###################
### DECORATION ###
###################

decoration {
    rounding = 10
    rounding_power = 2

    active_opacity = 1.0
    inactive_opacity = 1.0

    shadow {
        enabled = true
        range = 4
        render_power = 3
        color = rgba(1a1a1aee)
    }

    blur {
        enabled = true
        size = 3
        passes = 1
        vibrancy = 0.17
    }
}

################
### GROUPING ###
################

group {
    # Grouped window borders
    col.border_active   = rgba(ea7a73ff)
    col.border_inactive = rgba(595959aa)

    groupbar {
        enabled = true
        height = 13               # slightly taller than default
        font_size = 13
        # Same hue, slightly darker & softer than border
	text_color  = rgba(ffffffff)
	text_color_inactive = rgba(888888cc) 
        col.active   = rgba(4a4a4a00) #rgba(d96f69ee)
        col.inactive = rgba(4a4a4a00)
    }
}

###############
### MISC ######
###############

misc {
     font_family = JetBrainsMono Nerd Font
     force_default_wallpaper = 0
     
}

###################
### ANIMATIONS ###
###################

animations {
    enabled = yes

    bezier = easeOutQuint,   0.23, 1,    0.32, 1
    bezier = almostLinear,   0.5,  0.5,  0.75, 1
    bezier = quick,          0.15, 0,    0.1,  1

    animation = global,     1, 6, default
    animation = border,     1, 4, easeOutQuint
    animation = windows,    1, 3, easeOutQuint
    animation = windowsIn,  1, 3, easeOutQuint
    animation = windowsOut, 1, 2, linear
    animation = fade,       1, 2, quick
    animation = workspaces, 1, 2, almostLinear, fade
}

###################
### DWINDLE ###
###################

dwindle {
    pseudotile = true
    preserve_split = true
    force_split = 2
}

###################
### INPUT ###
###################

input {
    kb_layout = us
    follow_mouse = 1
    sensitivity = 0

    touchpad {
        natural_scroll = true
    }
}

gesture = 3, horizontal, workspace

###################
### KEYBINDINGS ###
###################

# Core
bind = $mainMod, RETURN, exec, $terminal
bind = $mainMod, D, exec, $menu
bind = $mainMod, Q, killactive
bind = $mainMod, F, togglefloating
bind = $mainMod SHIFT, F, fullscreen
bind = $mainMod, E, togglesplit
bind = $mainMod, W, togglegroup

bind = $mainMod, M, exec, command -v hyprshutdown >/dev/null 2>&1 && hyprshutdown || hyprctl dispatch exit

# Smart focus (direction-aware, group-aware)
bind = $mainMod, left,  exec, ~/.config/hypr/smart_focus_new.sh l
bind = $mainMod, right, exec, ~/.config/hypr/smart_focus_new.sh r
bind = $mainMod, up,    exec, ~/.config/hypr/smart_focus_new.sh u
bind = $mainMod, down,  exec, ~/.config/hypr/smart_focus_new.sh d

# Group toggle (directional)
bind = $mainMod Control, left,  exec, ~/.config/hypr/group_toggle.sh l
bind = $mainMod Control, right, exec, ~/.config/hypr/group_toggle.sh r
bind = $mainMod Control, up,    exec, ~/.config/hypr/group_toggle.sh u
bind = $mainMod Control, down,  exec, ~/.config/hypr/group_toggle.sh d

# Smart move (edge-aware group spill)
bind = $mainMod SHIFT, left,  exec, ~/.config/hypr/smart_move.sh l
bind = $mainMod SHIFT, right, exec, ~/.config/hypr/smart_move.sh r
bind = $mainMod SHIFT, up,    exec, ~/.config/hypr/smart_move.sh u
bind = $mainMod SHIFT, down,  exec, ~/.config/hypr/smart_move.sh d

###################
### RESIZE MODE ###
###################

bind = $mainMod, R, submap, resize

submap = resize
    bind = , left,  resizeactive, -20 0
    bind = , right, resizeactive,  20 0
    bind = , up,    resizeactive,  0 -20
    bind = , down,  resizeactive,  0  20

    bind = , escape, submap, reset
    bind = , return, submap, reset
submap = reset

## Screenshot mode

# Define the trigger to enter screenshot mode
bind = SUPER, S, submap, screenshot

# Start the submap
submap = screenshot

# 'r' for Region (Select an area)
binde = , R, exec, grim -g "$(slurp)" - | wl-copy
binde = , R, submap, reset

# 'w' for Window (Select a specific window)
binde = , W, exec, grim -g "$(slurp -o)" - | wl-copy
binde = , W, submap, reset

# 'ENTER' for Full Screen
binde = , RETURN, exec, grim - | wl-copy
binde = , RETURN, submap, reset

# 'escape' to cancel and exit the submap
bind = , escape, submap, reset

submap = reset


###################
### WORKSPACES ###
###################

bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

##############################
### WINDOW RULES ###
##############################
windowrule {
name = suppress-maximize-events
match:class = .*
suppress_event = maximize
}
windowrule {
name = fix-xwayland-drags
match:class = ^$
match:title = ^$
match:xwayland = true
match:float = true
match:fullscreen = false
match:pin = false
no_focus = true
}
